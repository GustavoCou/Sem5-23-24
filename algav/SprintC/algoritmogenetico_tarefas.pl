 :- discontiguous tempo_ate_fim/2.
 :- discontiguous tempo_desde_inicio/2.

% tarefa(Id, TempoProcessamento).
tarefa(t1, 4).
tarefa(t2, 2).
tarefa(t3, 3).
tarefa(t4, 8).
tarefa(t5, 4).
tarefa(t6, 5).
tarefa(t7, 9).
tarefa(t8, 10).
tarefa(t9, 11).
tarefa(t10, 22).
tarefa(t11, 34).
tarefa(t12, 22).
tarefa(t13, 34).
tarefa(t14, 6).
tarefa(t15, 7).
tarefa(t16, 9).
tarefa(t17, 10).
tarefa(t18, 12).
tarefa(t19, 2).
tarefa(t20, 3).
tarefa(t21, 42).
tarefa(t22, 1).
tarefa(t23, 23).
tarefa(t24, 26).
tarefa(t25, 23).
tarefa(t26, 28).
tarefa(t27, 6).
tarefa(t28, 3).
tarefa(t29, 4).
tarefa(t30, 9).


tempo_deslocamento(t1, t2, 3).
tempo_deslocamento(t1, t3, 5).
tempo_deslocamento(t1, t4, 5).
tempo_deslocamento(t1, t5, 4).
tempo_deslocamento(t1, t6, 6).
tempo_deslocamento(t1, t7, 2).
tempo_deslocamento(t1, t8, 3).
tempo_deslocamento(t1, t9, 4).
tempo_deslocamento(t1, t10, 5).
tempo_deslocamento(t1, t11, 2).
tempo_deslocamento(t1, t12, 3).
tempo_deslocamento(t1, t13, 5).
tempo_deslocamento(t1, t14, 5).
tempo_deslocamento(t1, t15, 4).
tempo_deslocamento(t1, t16, 6).
tempo_deslocamento(t1, t17, 2).
tempo_deslocamento(t1, t18, 3).
tempo_deslocamento(t1, t19, 4).
tempo_deslocamento(t1, t20, 1).
tempo_deslocamento(t1, t21, 2).
tempo_deslocamento(t1, t22, 3).
tempo_deslocamento(t1, t23, 5).
tempo_deslocamento(t1, t24, 2).
tempo_deslocamento(t1, t25, 7).
tempo_deslocamento(t1, t26, 3).
tempo_deslocamento(t1, t27, 2).
tempo_deslocamento(t1, t28, 8).
tempo_deslocamento(t1, t29, 3).
tempo_deslocamento(t1, t30, 9).

tempo_deslocamento(t2, t1, 2).
tempo_deslocamento(t2, t3, 2).
tempo_deslocamento(t2, t4, 2).
tempo_deslocamento(t2, t5, 2).
tempo_deslocamento(t2, t6, 2).
tempo_deslocamento(t2, t7, 2).
tempo_deslocamento(t2, t8, 2).
tempo_deslocamento(t2, t9, 2).
tempo_deslocamento(t2, t10, 2).
tempo_deslocamento(t2, t11, 2).
tempo_deslocamento(t2, t12, 2).
tempo_deslocamento(t2, t13, 2).
tempo_deslocamento(t2, t14, 2).
tempo_deslocamento(t2, t15, 2).
tempo_deslocamento(t2, t16, 2).
tempo_deslocamento(t2, t17, 2).
tempo_deslocamento(t2, t18, 2).
tempo_deslocamento(t2, t19, 2).
tempo_deslocamento(t2, t20, 2).
tempo_deslocamento(t2, t21, 2).
tempo_deslocamento(t2, t22, 2).
tempo_deslocamento(t2, t23, 2).
tempo_deslocamento(t2, t24, 2).
tempo_deslocamento(t2, t25, 2).
tempo_deslocamento(t2, t26, 2).
tempo_deslocamento(t2, t27, 2).
tempo_deslocamento(t2, t28, 2).
tempo_deslocamento(t2, t29, 2).
tempo_deslocamento(t2, t30, 2).

tempo_deslocamento(t3, t1, 2).
tempo_deslocamento(t3, t2, 2).
tempo_deslocamento(t3, t4, 5).
tempo_deslocamento(t3, t5, 2).
tempo_deslocamento(t3, t6, 2).
tempo_deslocamento(t3, t7, 3).
tempo_deslocamento(t3, t8, 2).
tempo_deslocamento(t3, t9, 9).
tempo_deslocamento(t3, t10, 2).
tempo_deslocamento(t3, t11, 5).
tempo_deslocamento(t3, t12, 8).
tempo_deslocamento(t3, t13, 10).
tempo_deslocamento(t3, t14, 23).
tempo_deslocamento(t3, t15, 4).
tempo_deslocamento(t3, t16, 23).
tempo_deslocamento(t3, t17, 22).
tempo_deslocamento(t3, t18, 1).
tempo_deslocamento(t3, t19, 45).
tempo_deslocamento(t3, t20, 9).
tempo_deslocamento(t3, t21, 7).
tempo_deslocamento(t3, t22, 4).
tempo_deslocamento(t3, t23, 2).
tempo_deslocamento(t3, t24, 12).
tempo_deslocamento(t3, t25, 12).
tempo_deslocamento(t3, t26, 10).
tempo_deslocamento(t3, t27, 25).
tempo_deslocamento(t3, t28, 21).
tempo_deslocamento(t3, t29, 22).
tempo_deslocamento(t3, t30, 2).

tempo_deslocamento(t4, t1, 2).
tempo_deslocamento(t4, t2, 2).
tempo_deslocamento(t4, t3, 5).
tempo_deslocamento(t4, t5, 2).
tempo_deslocamento(t4, t6, 2).
tempo_deslocamento(t4, t7, 3).
tempo_deslocamento(t4, t8, 2).
tempo_deslocamento(t4, t9, 9).
tempo_deslocamento(t4, t10, 2).
tempo_deslocamento(t4, t11, 5).
tempo_deslocamento(t4, t12, 8).
tempo_deslocamento(t4, t13, 10).
tempo_deslocamento(t4, t14, 23).
tempo_deslocamento(t4, t15, 4).
tempo_deslocamento(t4, t16, 23).
tempo_deslocamento(t4, t17, 22).
tempo_deslocamento(t4, t18, 1).
tempo_deslocamento(t4, t19, 45).
tempo_deslocamento(t4, t20, 9).
tempo_deslocamento(t4, t21, 7).
tempo_deslocamento(t4, t22, 4).
tempo_deslocamento(t4, t23, 2).
tempo_deslocamento(t4, t24, 12).
tempo_deslocamento(t4, t25, 12).
tempo_deslocamento(t4, t26, 10).
tempo_deslocamento(t4, t27, 25).
tempo_deslocamento(t4, t28, 21).
tempo_deslocamento(t4, t29, 22).
tempo_deslocamento(t4, t30, 2).

tempo_deslocamento(t5, t1, 2).
tempo_deslocamento(t5, t2, 2).
tempo_deslocamento(t5, t4, 5).
tempo_deslocamento(t5, t3, 2).
tempo_deslocamento(t5, t6, 2).
tempo_deslocamento(t5, t7, 3).
tempo_deslocamento(t5, t8, 2).
tempo_deslocamento(t5, t9, 9).
tempo_deslocamento(t5, t10, 2).
tempo_deslocamento(t5, t11, 5).
tempo_deslocamento(t5, t12, 8).
tempo_deslocamento(t5, t13, 10).
tempo_deslocamento(t5, t14, 23).
tempo_deslocamento(t5, t15, 4).
tempo_deslocamento(t5, t16, 23).
tempo_deslocamento(t5, t17, 22).
tempo_deslocamento(t5, t18, 1).
tempo_deslocamento(t5, t19, 45).
tempo_deslocamento(t5, t20, 9).
tempo_deslocamento(t5, t21, 7).
tempo_deslocamento(t5, t22, 4).
tempo_deslocamento(t5, t23, 2).
tempo_deslocamento(t5, t24, 12).
tempo_deslocamento(t5, t25, 12).
tempo_deslocamento(t5, t26, 10).
tempo_deslocamento(t5, t27, 25).
tempo_deslocamento(t5, t28, 21).
tempo_deslocamento(t5, t29, 22).
tempo_deslocamento(t5, t30, 2).

tempo_deslocamento(t6, t1, 2).
tempo_deslocamento(t6, t2, 2).
tempo_deslocamento(t6, t4, 5).
tempo_deslocamento(t6, t3, 2).
tempo_deslocamento(t6, t5, 2).
tempo_deslocamento(t6, t7, 3).
tempo_deslocamento(t6, t8, 2).
tempo_deslocamento(t6, t9, 9).
tempo_deslocamento(t6, t10, 2).
tempo_deslocamento(t6, t11, 5).
tempo_deslocamento(t6, t12, 8).
tempo_deslocamento(t6, t13, 10).
tempo_deslocamento(t6, t14, 23).
tempo_deslocamento(t6, t15, 4).
tempo_deslocamento(t6, t16, 23).
tempo_deslocamento(t6, t17, 22).
tempo_deslocamento(t6, t18, 1).
tempo_deslocamento(t6, t19, 45).
tempo_deslocamento(t6, t20, 9).
tempo_deslocamento(t6, t21, 7).
tempo_deslocamento(t6, t22, 4).
tempo_deslocamento(t6, t23, 2).
tempo_deslocamento(t6, t24, 12).
tempo_deslocamento(t6, t25, 12).
tempo_deslocamento(t6, t26, 10).
tempo_deslocamento(t6, t27, 25).
tempo_deslocamento(t6, t28, 21).
tempo_deslocamento(t6, t29, 22).
tempo_deslocamento(t6, t30, 2).

tempo_deslocamento(t7, t1, 20).
tempo_deslocamento(t7, t2, 21).
tempo_deslocamento(t7, t4, 3).
tempo_deslocamento(t7, t3, 5).
tempo_deslocamento(t7, t5, 6).
tempo_deslocamento(t7, t6, 1).
tempo_deslocamento(t7, t8, 7).
tempo_deslocamento(t7, t9, 10).
tempo_deslocamento(t7, t10, 6).
tempo_deslocamento(t7, t11, 9).
tempo_deslocamento(t7, t12, 10).
tempo_deslocamento(t7, t13, 45).
tempo_deslocamento(t7, t14, 23).
tempo_deslocamento(t7, t15, 4).
tempo_deslocamento(t7, t16, 23).
tempo_deslocamento(t7, t17, 22).
tempo_deslocamento(t7, t18, 1).
tempo_deslocamento(t7, t19, 45).
tempo_deslocamento(t7, t20, 9).
tempo_deslocamento(t7, t21, 7).
tempo_deslocamento(t7, t22, 4).
tempo_deslocamento(t7, t23, 2).
tempo_deslocamento(t7, t24, 12).
tempo_deslocamento(t7, t25, 12).
tempo_deslocamento(t7, t26, 10).
tempo_deslocamento(t7, t27, 25).
tempo_deslocamento(t7, t28, 21).
tempo_deslocamento(t7, t29, 22).
tempo_deslocamento(t7, t30, 2).

tempo_deslocamento(t8, t1, 20).
tempo_deslocamento(t8, t2, 21).
tempo_deslocamento(t8, t4, 3).
tempo_deslocamento(t8, t3, 5).
tempo_deslocamento(t8, t5, 6).
tempo_deslocamento(t8, t6, 1).
tempo_deslocamento(t8, t7, 7).
tempo_deslocamento(t8, t9, 10).
tempo_deslocamento(t8, t10, 6).
tempo_deslocamento(t8, t11, 9).
tempo_deslocamento(t8, t12, 10).
tempo_deslocamento(t8, t13, 45).
tempo_deslocamento(t8, t14, 23).
tempo_deslocamento(t8, t15, 4).
tempo_deslocamento(t8, t16, 23).
tempo_deslocamento(t8, t17, 22).
tempo_deslocamento(t8, t18, 1).
tempo_deslocamento(t8, t19, 45).
tempo_deslocamento(t8, t20, 9).
tempo_deslocamento(t8, t21, 7).
tempo_deslocamento(t8, t22, 4).
tempo_deslocamento(t8, t23, 2).
tempo_deslocamento(t8, t24, 12).
tempo_deslocamento(t8, t25, 12).
tempo_deslocamento(t8, t26, 10).
tempo_deslocamento(t8, t27, 25).
tempo_deslocamento(t8, t28, 21).
tempo_deslocamento(t8, t29, 22).
tempo_deslocamento(t8, t30, 2).

tempo_deslocamento(t9, t1, 20).
tempo_deslocamento(t9, t2, 21).
tempo_deslocamento(t9, t4, 31).
tempo_deslocamento(t9, t3, 21).
tempo_deslocamento(t9, t5, 34).
tempo_deslocamento(t9, t6, 15).
tempo_deslocamento(t9, t7, 29).
tempo_deslocamento(t9, t8, 10).
tempo_deslocamento(t9, t10, 6).
tempo_deslocamento(t9, t11, 19).
tempo_deslocamento(t9, t12, 10).
tempo_deslocamento(t9, t13, 45).
tempo_deslocamento(t9, t14, 23).
tempo_deslocamento(t9, t15, 4).
tempo_deslocamento(t9, t16, 23).
tempo_deslocamento(t9, t17, 22).
tempo_deslocamento(t9, t18, 5).
tempo_deslocamento(t9, t19, 35).
tempo_deslocamento(t9, t20, 4).
tempo_deslocamento(t9, t21, 5).
tempo_deslocamento(t9, t22, 6).
tempo_deslocamento(t9, t23, 7).
tempo_deslocamento(t9, t24, 12).
tempo_deslocamento(t9, t25, 12).
tempo_deslocamento(t9, t26, 10).
tempo_deslocamento(t9, t27, 5).
tempo_deslocamento(t9, t28, 29).
tempo_deslocamento(t9, t29, 22).
tempo_deslocamento(t9, t30, 2).

tempo_deslocamento(t10, t1, 20).
tempo_deslocamento(t10, t2, 21).
tempo_deslocamento(t10, t4, 31).
tempo_deslocamento(t10, t3, 21).
tempo_deslocamento(t10, t5, 34).
tempo_deslocamento(t10, t6, 15).
tempo_deslocamento(t10, t7, 29).
tempo_deslocamento(t10, t8, 10).
tempo_deslocamento(t10, t9, 6).
tempo_deslocamento(t10, t11, 19).
tempo_deslocamento(t10, t12, 10).
tempo_deslocamento(t10, t13, 45).
tempo_deslocamento(t10, t14, 23).
tempo_deslocamento(t10, t15, 4).
tempo_deslocamento(t10, t16, 23).
tempo_deslocamento(t10, t17, 22).
tempo_deslocamento(t10, t18, 5).
tempo_deslocamento(t10, t19, 35).
tempo_deslocamento(t10, t20, 4).
tempo_deslocamento(t10, t21, 5).
tempo_deslocamento(t10, t22, 6).
tempo_deslocamento(t10, t23, 7).
tempo_deslocamento(t10, t24, 12).
tempo_deslocamento(t10, t25, 12).
tempo_deslocamento(t10, t26, 10).
tempo_deslocamento(t10, t27, 5).
tempo_deslocamento(t10, t28, 29).
tempo_deslocamento(t10, t29, 22).
tempo_deslocamento(t10, t30, 2).

tempo_deslocamento(t11, t2, 3).
tempo_deslocamento(t11, t3, 5).
tempo_deslocamento(t11, t4, 5).
tempo_deslocamento(t11, t5, 4).
tempo_deslocamento(t11, t6, 6).
tempo_deslocamento(t11, t7, 2).
tempo_deslocamento(t11, t8, 3).
tempo_deslocamento(t11, t9, 4).
tempo_deslocamento(t11, t10, 5).
tempo_deslocamento(t11, t1, 2).
tempo_deslocamento(t11, t12, 3).
tempo_deslocamento(t11, t13, 5).
tempo_deslocamento(t11, t14, 5).
tempo_deslocamento(t11, t15, 4).
tempo_deslocamento(t11, t16, 6).
tempo_deslocamento(t11, t17, 2).
tempo_deslocamento(t11, t18, 3).
tempo_deslocamento(t11, t19, 4).
tempo_deslocamento(t11, t20, 1).
tempo_deslocamento(t11, t21, 2).
tempo_deslocamento(t11, t22, 3).
tempo_deslocamento(t11, t23, 5).
tempo_deslocamento(t11, t24, 2).
tempo_deslocamento(t11, t25, 7).
tempo_deslocamento(t11, t26, 3).
tempo_deslocamento(t11, t27, 2).
tempo_deslocamento(t11, t28, 8).
tempo_deslocamento(t11, t29, 3).
tempo_deslocamento(t11, t30, 9).

tempo_deslocamento(t12, t1, 3).
tempo_deslocamento(t12, t3, 4).
tempo_deslocamento(t12, t4, 5).
tempo_deslocamento(t12, t5, 22).
tempo_deslocamento(t12, t6, 21).
tempo_deslocamento(t12, t7, 27).
tempo_deslocamento(t12, t8, 3).
tempo_deslocamento(t12, t9, 1).
tempo_deslocamento(t12, t10, 8).
tempo_deslocamento(t12, t11, 9).
tempo_deslocamento(t12, t2, 22).
tempo_deslocamento(t12, t13, 12).
tempo_deslocamento(t12, t14, 12).
tempo_deslocamento(t12, t15, 22).
tempo_deslocamento(t12, t16, 7).
tempo_deslocamento(t12, t17, 3).
tempo_deslocamento(t12, t18, 2).
tempo_deslocamento(t12, t19, 1).
tempo_deslocamento(t12, t120, 12).
tempo_deslocamento(t12, t121, 22).
tempo_deslocamento(t12, t122, 32).
tempo_deslocamento(t12, t123, 42).
tempo_deslocamento(t12, t124, 52).
tempo_deslocamento(t12, t125, 22).
tempo_deslocamento(t12, t126, 21).
tempo_deslocamento(t12, t127, 21).
tempo_deslocamento(t12, t128, 29).
tempo_deslocamento(t12, t129, 30).
tempo_deslocamento(t12, t30, 22).

tempo_deslocamento(t13, t1, 3).
tempo_deslocamento(t13, t3, 4).
tempo_deslocamento(t13, t4, 5).
tempo_deslocamento(t13, t5, 22).
tempo_deslocamento(t13, t6, 21).
tempo_deslocamento(t13, t7, 27).
tempo_deslocamento(t13, t8, 3).
tempo_deslocamento(t13, t9, 1).
tempo_deslocamento(t13, t10, 8).
tempo_deslocamento(t13, t11, 9).
tempo_deslocamento(t13, t12, 22).
tempo_deslocamento(t13, t14, 12).
tempo_deslocamento(t13, t15, 22).
tempo_deslocamento(t13, t16, 7).
tempo_deslocamento(t13, t17, 3).
tempo_deslocamento(t13, t18, 2).
tempo_deslocamento(t13, t19, 1).
tempo_deslocamento(t13, t20, 12).
tempo_deslocamento(t13, t21, 22).
tempo_deslocamento(t13, t22, 32).
tempo_deslocamento(t13, t23, 42).
tempo_deslocamento(t13, t24, 52).
tempo_deslocamento(t13, t25, 22).
tempo_deslocamento(t13, t26, 21).
tempo_deslocamento(t13, t27, 21).
tempo_deslocamento(t13, t28, 29).
tempo_deslocamento(t13, t29, 30).
tempo_deslocamento(t13, t30, 22).

tempo_deslocamento(t14, t1, 3).
tempo_deslocamento(t14, t3, 4).
tempo_deslocamento(t14, t4, 5).
tempo_deslocamento(t14, t5, 22).
tempo_deslocamento(t14, t6, 21).
tempo_deslocamento(t14, t7, 27).
tempo_deslocamento(t14, t8, 3).
tempo_deslocamento(t14, t9, 1).
tempo_deslocamento(t14, t10, 8).
tempo_deslocamento(t14, t11, 9).
tempo_deslocamento(t14, t12, 22).
tempo_deslocamento(t14, t13, 12).
tempo_deslocamento(t14, t15, 22).
tempo_deslocamento(t14, t16, 7).
tempo_deslocamento(t14, t17, 3).
tempo_deslocamento(t14, t18, 2).
tempo_deslocamento(t14, t19, 1).
tempo_deslocamento(t14, t20, 12).
tempo_deslocamento(t14, t21, 22).
tempo_deslocamento(t14, t22, 32).
tempo_deslocamento(t14, t23, 42).
tempo_deslocamento(t14, t24, 52).
tempo_deslocamento(t14, t25, 22).
tempo_deslocamento(t14, t26, 21).
tempo_deslocamento(t14, t27, 21).
tempo_deslocamento(t14, t28, 29).
tempo_deslocamento(t14, t29, 30).
tempo_deslocamento(t14, t30, 22).

tempo_deslocamento(t15, t1, 3).
tempo_deslocamento(t15, t3, 4).
tempo_deslocamento(t15, t4, 5).
tempo_deslocamento(t15, t5, 22).
tempo_deslocamento(t15, t6, 21).
tempo_deslocamento(t15, t7, 27).
tempo_deslocamento(t15, t8, 3).
tempo_deslocamento(t15, t9, 1).
tempo_deslocamento(t15, t10, 8).
tempo_deslocamento(t15, t11, 9).
tempo_deslocamento(t15, t12, 22).
tempo_deslocamento(t15, t13, 12).
tempo_deslocamento(t15, t2, 22).
tempo_deslocamento(t15, t16, 7).
tempo_deslocamento(t15, t17, 3).
tempo_deslocamento(t15, t18, 2).
tempo_deslocamento(t15, t19, 1).
tempo_deslocamento(t15, t20, 12).
tempo_deslocamento(t15, t21, 22).
tempo_deslocamento(t15, t22, 32).
tempo_deslocamento(t15, t23, 42).
tempo_deslocamento(t15, t24, 52).
tempo_deslocamento(t15, t25, 22).
tempo_deslocamento(t15, t26, 21).
tempo_deslocamento(t15, t27, 21).
tempo_deslocamento(t15, t28, 29).
tempo_deslocamento(t15, t29, 30).
tempo_deslocamento(t15, t30, 22).

tempo_deslocamento(t16, t1, 3).
tempo_deslocamento(t16, t3, 4).
tempo_deslocamento(t16, t4, 5).
tempo_deslocamento(t16, t5, 22).
tempo_deslocamento(t16, t6, 21).
tempo_deslocamento(t16, t7, 27).
tempo_deslocamento(t16, t8, 3).
tempo_deslocamento(t16, t9, 1).
tempo_deslocamento(t16, t10, 8).
tempo_deslocamento(t16, t11, 9).
tempo_deslocamento(t16, t12, 22).
tempo_deslocamento(t16, t13, 12).
tempo_deslocamento(t16, t2, 22).
tempo_deslocamento(t16, t15, 7).
tempo_deslocamento(t16, t17, 3).
tempo_deslocamento(t16, t18, 2).
tempo_deslocamento(t16, t19, 1).
tempo_deslocamento(t16, t20, 12).
tempo_deslocamento(t16, t21, 22).
tempo_deslocamento(t16, t22, 32).
tempo_deslocamento(t16, t23, 42).
tempo_deslocamento(t16, t24, 52).
tempo_deslocamento(t16, t25, 22).
tempo_deslocamento(t16, t26, 21).
tempo_deslocamento(t16, t27, 21).
tempo_deslocamento(t16, t28, 29).
tempo_deslocamento(t16, t29, 30).
tempo_deslocamento(t16, t30, 22).

tempo_deslocamento(t17, t1, 3).
tempo_deslocamento(t17, t3, 4).
tempo_deslocamento(t17, t4, 5).
tempo_deslocamento(t17, t5, 22).
tempo_deslocamento(t17, t6, 21).
tempo_deslocamento(t17, t7, 27).
tempo_deslocamento(t17, t8, 3).
tempo_deslocamento(t17, t9, 1).
tempo_deslocamento(t17, t10, 8).
tempo_deslocamento(t17, t11, 9).
tempo_deslocamento(t17, t12, 22).
tempo_deslocamento(t17, t13, 12).
tempo_deslocamento(t17, t2, 22).
tempo_deslocamento(t17, t15, 7).
tempo_deslocamento(t17, t14, 7).
tempo_deslocamento(t17, t16, 3).
tempo_deslocamento(t17, t18, 2).
tempo_deslocamento(t17, t19, 1).
tempo_deslocamento(t17, t20, 12).
tempo_deslocamento(t17, t21, 22).
tempo_deslocamento(t17, t22, 32).
tempo_deslocamento(t17, t23, 42).
tempo_deslocamento(t17, t24, 52).
tempo_deslocamento(t17, t25, 22).
tempo_deslocamento(t17, t26, 21).
tempo_deslocamento(t17, t27, 21).
tempo_deslocamento(t17, t28, 29).
tempo_deslocamento(t17, t29, 30).
tempo_deslocamento(t17, t30, 22).

tempo_deslocamento(t18, t1, 2).
tempo_deslocamento(t18, t2, 2).
tempo_deslocamento(t18, t4, 5).
tempo_deslocamento(t18, t3, 2).
tempo_deslocamento(t18, t6, 2).
tempo_deslocamento(t18, t7, 3).
tempo_deslocamento(t18, t8, 2).
tempo_deslocamento(t18, t9, 9).
tempo_deslocamento(t18, t10, 2).
tempo_deslocamento(t18, t11, 5).
tempo_deslocamento(t18, t12, 8).
tempo_deslocamento(t18, t13, 10).
tempo_deslocamento(t18, t14, 23).
tempo_deslocamento(t18, t15, 4).
tempo_deslocamento(t18, t16, 23).
tempo_deslocamento(t18, t17, 22).
tempo_deslocamento(t18, t5, 1).
tempo_deslocamento(t18, t19, 45).
tempo_deslocamento(t18, t20, 9).
tempo_deslocamento(t18, t21, 7).
tempo_deslocamento(t18, t22, 4).
tempo_deslocamento(t18, t23, 2).
tempo_deslocamento(t18, t24, 12).
tempo_deslocamento(t18, t25, 12).
tempo_deslocamento(t18, t26, 10).
tempo_deslocamento(t18, t27, 25).
tempo_deslocamento(t18, t28, 21).
tempo_deslocamento(t18, t29, 22).
tempo_deslocamento(t18, t30, 2).

tempo_deslocamento(t19, t1, 20).
tempo_deslocamento(t19, t2, 21).
tempo_deslocamento(t19, t4, 3).
tempo_deslocamento(t19, t3, 5).
tempo_deslocamento(t19, t5, 6).
tempo_deslocamento(t19, t6, 1).
tempo_deslocamento(t19, t7, 7).
tempo_deslocamento(t19, t9, 10).
tempo_deslocamento(t19, t10, 6).
tempo_deslocamento(t19, t11, 9).
tempo_deslocamento(t19, t12, 10).
tempo_deslocamento(t19, t13, 45).
tempo_deslocamento(t19, t14, 23).
tempo_deslocamento(t19, t15, 4).
tempo_deslocamento(t19, t16, 23).
tempo_deslocamento(t19, t17, 22).
tempo_deslocamento(t19, t18, 1).
tempo_deslocamento(t19, t8, 45).
tempo_deslocamento(t19, t20, 9).
tempo_deslocamento(t19, t21, 7).
tempo_deslocamento(t19, t22, 4).
tempo_deslocamento(t19, t23, 2).
tempo_deslocamento(t19, t24, 12).
tempo_deslocamento(t19, t25, 12).
tempo_deslocamento(t19, t26, 10).
tempo_deslocamento(t19, t27, 25).
tempo_deslocamento(t19, t28, 21).
tempo_deslocamento(t19, t29, 22).
tempo_deslocamento(t19, t30, 2).

tempo_deslocamento(t20, t2, 3).
tempo_deslocamento(t20, t3, 5).
tempo_deslocamento(t20, t4, 5).
tempo_deslocamento(t20, t5, 4).
tempo_deslocamento(t20, t6, 6).
tempo_deslocamento(t20, t7, 2).
tempo_deslocamento(t20, t8, 3).
tempo_deslocamento(t20, t9, 4).
tempo_deslocamento(t20, t10, 5).
tempo_deslocamento(t20, t11, 2).
tempo_deslocamento(t20, t12, 3).
tempo_deslocamento(t20, t13, 5).
tempo_deslocamento(t20, t14, 5).
tempo_deslocamento(t20, t15, 4).
tempo_deslocamento(t20, t16, 6).
tempo_deslocamento(t20, t17, 2).
tempo_deslocamento(t20, t18, 3).
tempo_deslocamento(t20, t19, 4).
tempo_deslocamento(t20, t1, 1).
tempo_deslocamento(t20, t21, 2).
tempo_deslocamento(t20, t22, 3).
tempo_deslocamento(t20, t23, 5).
tempo_deslocamento(t20, t24, 2).
tempo_deslocamento(t20, t25, 7).
tempo_deslocamento(t20, t26, 3).
tempo_deslocamento(t20, t27, 2).
tempo_deslocamento(t20, t28, 8).
tempo_deslocamento(t20, t29, 3).
tempo_deslocamento(t20, t30, 9).

tempo_deslocamento(t21, t1, 2).
tempo_deslocamento(t21, t3, 2).
tempo_deslocamento(t21, t4, 2).
tempo_deslocamento(t21, t5, 2).
tempo_deslocamento(t21, t6, 2).
tempo_deslocamento(t21, t7, 2).
tempo_deslocamento(t21, t8, 2).
tempo_deslocamento(t21, t9, 2).
tempo_deslocamento(t21, t10, 2).
tempo_deslocamento(t21, t11, 2).
tempo_deslocamento(t21, t12, 2).
tempo_deslocamento(t21, t13, 2).
tempo_deslocamento(t21, t14, 2).
tempo_deslocamento(t21, t15, 2).
tempo_deslocamento(t21, t16, 2).
tempo_deslocamento(t21, t17, 2).
tempo_deslocamento(t21, t18, 2).
tempo_deslocamento(t21, t19, 2).
tempo_deslocamento(t21, t20, 2).
tempo_deslocamento(t21, t2, 2).
tempo_deslocamento(t21, t22, 2).
tempo_deslocamento(t21, t23, 2).
tempo_deslocamento(t21, t24, 2).
tempo_deslocamento(t21, t25, 2).
tempo_deslocamento(t21, t26, 2).
tempo_deslocamento(t21, t27, 2).
tempo_deslocamento(t21, t28, 2).
tempo_deslocamento(t21, t29, 2).
tempo_deslocamento(t21, t30, 2).

tempo_deslocamento(t22, t1, 2).
tempo_deslocamento(t22, t2, 2).
tempo_deslocamento(t22, t4, 5).
tempo_deslocamento(t22, t3, 2).
tempo_deslocamento(t22, t6, 2).
tempo_deslocamento(t22, t7, 3).
tempo_deslocamento(t22, t8, 2).
tempo_deslocamento(t22, t9, 9).
tempo_deslocamento(t22, t10, 2).
tempo_deslocamento(t22, t11, 5).
tempo_deslocamento(t22, t12, 8).
tempo_deslocamento(t22, t13, 10).
tempo_deslocamento(t22, t14, 23).
tempo_deslocamento(t22, t15, 4).
tempo_deslocamento(t22, t16, 23).
tempo_deslocamento(t22, t17, 22).
tempo_deslocamento(t22, t18, 1).
tempo_deslocamento(t22, t19, 45).
tempo_deslocamento(t22, t20, 9).
tempo_deslocamento(t22, t21, 7).
tempo_deslocamento(t22, t5, 4).
tempo_deslocamento(t22, t23, 2).
tempo_deslocamento(t22, t24, 12).
tempo_deslocamento(t22, t25, 12).
tempo_deslocamento(t22, t26, 10).
tempo_deslocamento(t22, t27, 25).
tempo_deslocamento(t22, t28, 21).
tempo_deslocamento(t22, t29, 22).
tempo_deslocamento(t22, t30, 2).


tempo_deslocamento(t23, t1, 3).
tempo_deslocamento(t23, t3, 4).
tempo_deslocamento(t23, t4, 5).
tempo_deslocamento(t23, t5, 22).
tempo_deslocamento(t23, t6, 21).
tempo_deslocamento(t23, t7, 27).
tempo_deslocamento(t23, t8, 3).
tempo_deslocamento(t23, t9, 1).
tempo_deslocamento(t23, t10, 8).
tempo_deslocamento(t23, t11, 9).
tempo_deslocamento(t23, t12, 22).
tempo_deslocamento(t23, t13, 12).
tempo_deslocamento(t23, t2, 22).
tempo_deslocamento(t23, t15, 7).
tempo_deslocamento(t23, t14, 7).
tempo_deslocamento(t23, t16, 3).
tempo_deslocamento(t23, t18, 2).
tempo_deslocamento(t23, t19, 1).
tempo_deslocamento(t23, t20, 12).
tempo_deslocamento(t23, t21, 22).
tempo_deslocamento(t23, t22, 32).
tempo_deslocamento(t23, t17, 42).
tempo_deslocamento(t23, t24, 52).
tempo_deslocamento(t23, t25, 22).
tempo_deslocamento(t23, t26, 21).
tempo_deslocamento(t23, t27, 21).
tempo_deslocamento(t23, t28, 29).
tempo_deslocamento(t23, t29, 30).
tempo_deslocamento(t23, t30, 22).

tempo_deslocamento(t24, t1, 3).
tempo_deslocamento(t24, t3, 4).
tempo_deslocamento(t24, t4, 5).
tempo_deslocamento(t24, t5, 22).
tempo_deslocamento(t24, t6, 21).
tempo_deslocamento(t24, t7, 27).
tempo_deslocamento(t24, t8, 3).
tempo_deslocamento(t24, t9, 1).
tempo_deslocamento(t24, t10, 8).
tempo_deslocamento(t24, t11, 9).
tempo_deslocamento(t24, t12, 22).
tempo_deslocamento(t24, t13, 12).
tempo_deslocamento(t24, t2, 22).
tempo_deslocamento(t24, t15, 7).
tempo_deslocamento(t24, t14, 7).
tempo_deslocamento(t24, t16, 3).
tempo_deslocamento(t24, t18, 2).
tempo_deslocamento(t24, t19, 1).
tempo_deslocamento(t24, t20, 12).
tempo_deslocamento(t24, t21, 22).
tempo_deslocamento(t24, t22, 32).
tempo_deslocamento(t24, t17, 42).
tempo_deslocamento(t24, t23, 52).
tempo_deslocamento(t24, t25, 22).
tempo_deslocamento(t24, t26, 21).
tempo_deslocamento(t24, t27, 21).
tempo_deslocamento(t24, t28, 29).
tempo_deslocamento(t24, t29, 30).
tempo_deslocamento(t24, t30, 22).

tempo_deslocamento(t25, t1, 20).
tempo_deslocamento(t25, t2, 21).
tempo_deslocamento(t25, t4, 3).
tempo_deslocamento(t25, t3, 5).
tempo_deslocamento(t25, t5, 6).
tempo_deslocamento(t25, t6, 1).
tempo_deslocamento(t25, t7, 7).
tempo_deslocamento(t25, t9, 10).
tempo_deslocamento(t25, t10, 6).
tempo_deslocamento(t25, t11, 9).
tempo_deslocamento(t25, t12, 10).
tempo_deslocamento(t25, t13, 45).
tempo_deslocamento(t25, t14, 23).
tempo_deslocamento(t25, t15, 4).
tempo_deslocamento(t25, t16, 23).
tempo_deslocamento(t25, t17, 22).
tempo_deslocamento(t25, t18, 1).
tempo_deslocamento(t25, t19, 45).
tempo_deslocamento(t25, t20, 9).
tempo_deslocamento(t25, t21, 7).
tempo_deslocamento(t25, t22, 4).
tempo_deslocamento(t25, t23, 2).
tempo_deslocamento(t25, t24, 12).
tempo_deslocamento(t25, t8, 12).
tempo_deslocamento(t25, t26, 10).
tempo_deslocamento(t25, t27, 25).
tempo_deslocamento(t25, t28, 21).
tempo_deslocamento(t25, t29, 22).
tempo_deslocamento(t25, t30, 2).

tempo_deslocamento(t26, t1, 20).
tempo_deslocamento(t26, t2, 21).
tempo_deslocamento(t26, t4, 3).
tempo_deslocamento(t26, t3, 5).
tempo_deslocamento(t26, t5, 6).
tempo_deslocamento(t26, t6, 1).
tempo_deslocamento(t26, t7, 7).
tempo_deslocamento(t26, t9, 10).
tempo_deslocamento(t26, t10, 6).
tempo_deslocamento(t26, t11, 9).
tempo_deslocamento(t26, t12, 10).
tempo_deslocamento(t26, t13, 45).
tempo_deslocamento(t26, t14, 23).
tempo_deslocamento(t26, t15, 4).
tempo_deslocamento(t26, t16, 23).
tempo_deslocamento(t26, t17, 22).
tempo_deslocamento(t26, t18, 1).
tempo_deslocamento(t26, t19, 45).
tempo_deslocamento(t26, t20, 9).
tempo_deslocamento(t26, t21, 7).
tempo_deslocamento(t26, t22, 4).
tempo_deslocamento(t26, t23, 2).
tempo_deslocamento(t26, t24, 12).
tempo_deslocamento(t26, t8, 12).
tempo_deslocamento(t26, t25, 10).
tempo_deslocamento(t26, t27, 25).
tempo_deslocamento(t26, t28, 21).
tempo_deslocamento(t26, t29, 22).
tempo_deslocamento(t26, t30, 2).

tempo_deslocamento(t27, t1, 20).
tempo_deslocamento(t27, t2, 21).
tempo_deslocamento(t27, t4, 31).
tempo_deslocamento(t27, t3, 21).
tempo_deslocamento(t27, t5, 34).
tempo_deslocamento(t27, t6, 15).
tempo_deslocamento(t27, t7, 29).
tempo_deslocamento(t27, t8, 10).
tempo_deslocamento(t27, t9, 6).
tempo_deslocamento(t27, t11, 19).
tempo_deslocamento(t27, t12, 10).
tempo_deslocamento(t27, t13, 45).
tempo_deslocamento(t27, t14, 23).
tempo_deslocamento(t27, t15, 4).
tempo_deslocamento(t27, t16, 23).
tempo_deslocamento(t27, t17, 22).
tempo_deslocamento(t27, t18, 5).
tempo_deslocamento(t27, t19, 35).
tempo_deslocamento(t27, t20, 4).
tempo_deslocamento(t27, t21, 5).
tempo_deslocamento(t27, t22, 6).
tempo_deslocamento(t27, t23, 7).
tempo_deslocamento(t27, t24, 12).
tempo_deslocamento(t27, t25, 12).
tempo_deslocamento(t27, t26, 10).
tempo_deslocamento(t27, t10, 5).
tempo_deslocamento(t27, t28, 29).
tempo_deslocamento(t27, t29, 22).
tempo_deslocamento(t27, t30, 2).

tempo_deslocamento(t28, t1, 20).
tempo_deslocamento(t28, t2, 21).
tempo_deslocamento(t28, t4, 31).
tempo_deslocamento(t28, t3, 21).
tempo_deslocamento(t28, t5, 34).
tempo_deslocamento(t28, t6, 15).
tempo_deslocamento(t28, t7, 29).
tempo_deslocamento(t28, t8, 10).
tempo_deslocamento(t28, t9, 6).
tempo_deslocamento(t28, t11, 19).
tempo_deslocamento(t28, t12, 10).
tempo_deslocamento(t28, t13, 45).
tempo_deslocamento(t28, t14, 23).
tempo_deslocamento(t28, t15, 4).
tempo_deslocamento(t28, t16, 23).
tempo_deslocamento(t28, t17, 22).
tempo_deslocamento(t28, t18, 5).
tempo_deslocamento(t28, t19, 35).
tempo_deslocamento(t28, t20, 4).
tempo_deslocamento(t28, t21, 5).
tempo_deslocamento(t28, t22, 6).
tempo_deslocamento(t28, t23, 7).
tempo_deslocamento(t28, t24, 12).
tempo_deslocamento(t28, t25, 12).
tempo_deslocamento(t28, t26, 10).
tempo_deslocamento(t28, t10, 5).
tempo_deslocamento(t28, t27, 29).
tempo_deslocamento(t28, t29, 22).
tempo_deslocamento(t28, t30, 2).

tempo_deslocamento(t29, t1, 2).
tempo_deslocamento(t29, t2, 2).
tempo_deslocamento(t29, t4, 5).
tempo_deslocamento(t29, t5, 2).
tempo_deslocamento(t29, t6, 2).
tempo_deslocamento(t29, t7, 3).
tempo_deslocamento(t29, t8, 2).
tempo_deslocamento(t29, t9, 9).
tempo_deslocamento(t29, t10, 2).
tempo_deslocamento(t29, t11, 5).
tempo_deslocamento(t29, t12, 8).
tempo_deslocamento(t29, t13, 10).
tempo_deslocamento(t29, t14, 23).
tempo_deslocamento(t29, t15, 4).
tempo_deslocamento(t29, t16, 23).
tempo_deslocamento(t29, t17, 22).
tempo_deslocamento(t29, t18, 1).
tempo_deslocamento(t29, t19, 45).
tempo_deslocamento(t29, t20, 9).
tempo_deslocamento(t29, t21, 7).
tempo_deslocamento(t29, t22, 4).
tempo_deslocamento(t29, t23, 2).
tempo_deslocamento(t29, t24, 12).
tempo_deslocamento(t29, t25, 12).
tempo_deslocamento(t29, t26, 10).
tempo_deslocamento(t29, t27, 25).
tempo_deslocamento(t29, t28, 21).
tempo_deslocamento(t29, t3, 22).
tempo_deslocamento(t29, t30, 2).

tempo_deslocamento(t30, t1, 2).
tempo_deslocamento(t30, t2, 2).
tempo_deslocamento(t30, t4, 5).
tempo_deslocamento(t30, t3, 2).
tempo_deslocamento(t30, t6, 2).
tempo_deslocamento(t30, t7, 3).
tempo_deslocamento(t30, t8, 2).
tempo_deslocamento(t30, t9, 9).
tempo_deslocamento(t30, t10, 2).
tempo_deslocamento(t30, t11, 5).
tempo_deslocamento(t30, t12, 8).
tempo_deslocamento(t30, t13, 10).
tempo_deslocamento(t30, t14, 23).
tempo_deslocamento(t30, t15, 4).
tempo_deslocamento(t30, t16, 23).
tempo_deslocamento(t30, t17, 22).
tempo_deslocamento(t30, t18, 1).
tempo_deslocamento(t30, t19, 45).
tempo_deslocamento(t30, t20, 9).
tempo_deslocamento(t30, t21, 7).
tempo_deslocamento(t30, t5, 4).
tempo_deslocamento(t30, t23, 2).
tempo_deslocamento(t30, t24, 12).
tempo_deslocamento(t30, t25, 12).
tempo_deslocamento(t30, t26, 10).
tempo_deslocamento(t30, t27, 25).
tempo_deslocamento(t30, t28, 21).
tempo_deslocamento(t30, t29, 22).
tempo_deslocamento(t30, t22, 2).

%tempo_inicio_e_fim
tempo_desde_inicio(t1, 5).  
tempo_ate_fim(t1, 3).  
tempo_desde_inicio(t2, 4).  
tempo_ate_fim(t2, 2).  
tempo_desde_inicio(t3, 6).  
tempo_ate_fim(t3, 4).  
tempo_desde_inicio(t4, 5).  
tempo_ate_fim(t4, 3).     
tempo_desde_inicio(t5, 5).  
tempo_ate_fim(t5, 3).  
tempo_desde_inicio(t6, 7).  
tempo_ate_fim(t6, 7).  
tempo_desde_inicio(t7, 2).  
tempo_ate_fim(t7, 3).  
tempo_desde_inicio(t8, 1).  
tempo_ate_fim(t8, 2).  
tempo_desde_inicio(t9, 3).  
tempo_ate_fim(t9, 3).
tempo_desde_inicio(t10, 2).  
tempo_ate_fim(t10, 2).  
tempo_desde_inicio(t11, 1).  
tempo_ate_fim(t11, 2).
tempo_desde_inicio(t12, 2).  
tempo_ate_fim(t12, 3).
tempo_desde_inicio(t13, 3).  
tempo_ate_fim(t13, 2).
tempo_desde_inicio(t14, 5).  
tempo_ate_fim(t14, 5).
tempo_desde_inicio(t15, 7).  
tempo_ate_fim(t15, 7).
tempo_desde_inicio(t16, 3).  
tempo_ate_fim(t16, 3).
tempo_desde_inicio(t17, 2).  
tempo_ate_fim(t17, 3).
tempo_desde_inicio(t18, 2).  
tempo_ate_fim(t18, 3).
tempo_desde_inicio(t19, 3).  
tempo_ate_fim(t19, 1).
tempo_desde_inicio(t20, 1).  
tempo_ate_fim(t20, 2).
tempo_desde_inicio(t21, 2).  
tempo_ate_fim(t21, 3).
tempo_desde_inicio(t22, 5).  
tempo_ate_fim(t22, 4).
tempo_desde_inicio(t23, 3).  
tempo_ate_fim(t23, 4).
tempo_desde_inicio(t24, 2).  
tempo_ate_fim(t24, 1).
tempo_desde_inicio(t25, 2).  
tempo_ate_fim(t25, 3).
tempo_desde_inicio(t26, 1).  
tempo_ate_fim(t27, 1).
tempo_desde_inicio(t28, 2).  
tempo_ate_fim(t28, 3).
tempo_desde_inicio(t29, 4).  
tempo_ate_fim(t29, 3).
tempo_desde_inicio(t30, 9).  
tempo_ate_fim(t30, 3).





% tarefas(NTarefas).
tarefas(30). 

% parameterizacao
inicializa:-write('Numero de novas Geracoes: '),read(NG),
	(retract(geracoes(_));true), asserta(geracoes(NG)),
	write('Dimensao da Populacao: '),read(DP),
	(retract(populacao(_));true), asserta(populacao(DP)),
	write('Probabilidade de Cruzamento(percentagem): '), read(P1),
	PC is P1/100, 
	(retract(prob_cruzamento(_));true), 	asserta(prob_cruzamento(PC)),
	write('Probabilidade de Mutacao(percentagem): '), read(P2),
	PM is P2/100, 
    (retract(prob_mutacao(_));true), asserta(prob_mutacao(PM)),
    write('Tempo Solucao(segundos): '), read(TempS),
    (retract(tempo_solucao(_));true), asserta(tempo_solucao(TempS)),
    write('Avaliacao Otima:'), read(AO),
    (retract(avaliacao_otima(_));true), asserta(avaliacao_otima(AO)),
    write('Restricao de Estabilizacao:'), read(RE),
    (retract(restricaoEstabilizacao(_));true), asserta(restricaoEstabilizacao(RE)),
	(retract(estabilizacao_atual(_));true), asserta(estabilizacao_atual(0)),
	PMelhor is (DP*30)/100, 
	ceiling(PMelhor,PMelhor1),
	(retract(p_melhores(_));true), asserta(p_melhores(PMelhor1)).

gera:-
	inicializa,
	gera_populacao(Pop),
	write('Pop='),write(Pop),nl,
	avalia_populacao(Pop,PopAv),
	write('PopAv='),write(PopAv),nl,
	ordena_populacao(PopAv,PopOrd),
    geracoes(NG),
    get_time(Tempi),
    (retract(tempo_inicial(_));true), asserta(tempo_inicial(Tempi)),
	gera_geracao(0,NG,PopOrd,ResultPop),

	write('FinalPop='),write(ResultPop),nl,
			 mostra_solucao_otima(ResultPop).


gera_populacao(Pop):-
	populacao(TamPop),
	tarefas(NumT),
	findall(Tarefa,tarefa(Tarefa,_),ListaTarefas),
	gera_populacao(TamPop,ListaTarefas,NumT,Pop).

gera_populacao(0,_,_,[]):-!.

gera_populacao(TamPop,ListaTarefas,NumT,[Ind|Resto]):-
	TamPop1 is TamPop-1,
	gera_populacao(TamPop1,ListaTarefas,NumT,Resto),
	gera_individuo(ListaTarefas,NumT,Ind),
	not(member(Ind,Resto)).
gera_populacao(TamPop,ListaTarefas,NumT,L):-
	gera_populacao(TamPop,ListaTarefas,NumT,L).

gera_individuo([G],1,[G]):-!.

gera_individuo(ListaTarefas,NumT,[G|Resto]):-
NumT > 0,
	NumTemp is NumT + 1, % To use with random
	random(1,NumTemp,N),
	retira(N,ListaTarefas,G,NovaLista),
	NumT1 is NumT-1,
	gera_individuo(NovaLista,NumT1,Resto).
	gera_individuo(_, 0, []).

retira(1,[G|Resto],G,Resto).
retira(N,[G1|Resto],G,[G1|Resto1]):-
	N1 is N-1,
	retira(N1,Resto,G,Resto1).


avalia_populacao([],[]).
avalia_populacao([Ind|Resto],[Ind*V|Resto1]):-
	avalia(Ind,V),
	avalia_populacao(Resto,Resto1).


avalia(Seq, V) :-
    avalia(Seq, 0, V).


avalia([], V, V).
avalia([T], V, VFinal) :-
    tempo_ate_fim(T, TempoFinal),
    VFinal is V + TempoFinal.
avalia([T1, T2 | Resto], Acc, V) :-
    (tempo_deslocamento(T1, T2, TempoDesloc) -> true; TempoDesloc = 0),
    AccAtualizado is Acc + TempoDesloc,
    avalia([T2 | Resto], AccAtualizado, V).


avalia_com_inicio([T1 | Resto], V) :-
    tempo_desde_inicio(T1, TempoInicio),
    avalia([T1 | Resto], TempoInicio, V).


ordena_populacao(PopAv,PopAvOrd):-
	bsort(PopAv,PopAvOrd).

bsort([X],[X]):-!.
bsort([X|Xs],Ys):-
	bsort(Xs,Zs),
	btroca([X|Zs],Ys).


btroca([X],[X]):-!.

btroca([X*VX,Y*VY|L1],[Y*VY|L2]):-
	VX>VY,!,
	btroca([X*VX|L1],L2).

btroca([X|L1],[X|L2]):-btroca(L1,L2).


gera_geracao(G,G,Pop,Pop):-!,
	write('Geracao '), write(G), write(':'), nl, write(Pop), nl.

gera_geracao(N,G,Pop,ResultPop):-
    tempo_inicial(Tempi),
    get_time(Tempf),
    tempo_solucao(TempS),
    estabilizacao_atual(EA),
	restricaoEstabilizacao(RE),
	write('Geracao '), write(N), write(':'), nl, write(Pop), nl,
    (
    ((Tempf-Tempi)>=TempS,!,ResultPop=Pop);
    ((EA >= RE,!,ResultPop=Pop));
    (Pop=[_*MenorValor|_],
    avaliacao_otima(AO),
    ((MenorValor=<AO,!,ResultPop=Pop);
    (random_permutation(Pop,PopPermuted),%nl,write('LRP='),write(PopPermuted),nl,
	cruzamento(PopPermuted,NPop1),
	mutacao(NPop1,NPop),
	avalia_populacao(NPop,NPopAv),
	append(NPopAv, Pop, NPopAv1),
	eliminaRepetidos(NPopAv1,NPopAv2),
	ordena_populacao(NPopAv2,NPopOrd),
	p_melhores(PMelhor),
	selecionaElem(NPopOrd,PopProxGer,PopResto, PMelhor),
	avalia_random(PopResto,PopRestoAv),
	ordena_populacao(PopRestoAv,PopRestoOrd),
	populacao(DP),
	PResto is DP-PMelhor,
	selecionaElem(PopRestoOrd,PopRestoSelected,_, PResto),
	refazAvaliacaoRand(PopRestoSelected,PopResto,PopRestoProxGer),
	ordena_populacao(PopRestoProxGer,PopRestoProxGerOrd),
	append(PopProxGer,PopRestoProxGerOrd,PopFinal),
	N1 is N+1,
	incg_estabilizacao(EA,PopFinal,Pop),
    gera_geracao(N1,G,PopFinal,ResultPop))
	))).

selecionaElem([H|Resto],[H],Resto, 1):-!.
selecionaElem([H],[H],[], _):-!.
selecionaElem([H|NPopOrd],[H|N1PopOrd],Resto, PAtual):- PAtual1 is PAtual - 1, selecionaElem(NPopOrd,N1PopOrd,Resto,PAtual1).

avalia_random([H*Av],[H*AvR]):-random(0.0,1.0,R),
							   AvR is Av*R.
avalia_random([H*Av|PopResto],[H*AvR|PopRestoAV]):-random(0.0,1.0,R),
												   AvR is Av*R,
												   avalia_random(PopResto, PopRestoAV).

refazAvaliacaoRand([H*_],PopResto,[H*AvR]):-member(H*AvR,PopResto),!.
refazAvaliacaoRand([H*_|PopRestoSelected],PopResto,[H*AvR|PopRestoProxGer]):-member(H*AvR,PopResto),!,refazAvaliacaoRand(PopRestoSelected,PopResto,PopRestoProxGer).	
refazAvaliacaoRand([_|PopRestoSelected],PopResto,PopRestoProxGer):-refazAvaliacaoRand(PopRestoSelected,PopResto,PopRestoProxGer).						


incg_estabilizacao(EA,NPopOrd,Pop):-((NPopOrd == Pop, !, EA1 is EA+1);(EA1 is 0)),
								(retract(estabilizacao_atual(_));true), asserta(estabilizacao_atual(EA1)).

eliminaRepetidos([H],[H]):-!.
eliminaRepetidos([H|N1PopOrd],[H|N2PopOrd]):-not(member(H,N1PopOrd)),!,eliminaRepetidos(N1PopOrd,N2PopOrd).
eliminaRepetidos([_|N1PopOrd],N2PopOrd):-eliminaRepetidos(N1PopOrd,N2PopOrd).



gerar_pontos_cruzamento(P1,P2):-
	gerar_pontos_cruzamento1(P1,P2).

gerar_pontos_cruzamento1(P1,P2):-
	tarefas(N),
	NTemp is N+1,
	random(1,NTemp,P11),
	random(1,NTemp,P21),
	P11\==P21,!,
	((P11<P21,!,P1=P11,P2=P21);(P1=P21,P2=P11)).
gerar_pontos_cruzamento1(P1,P2):-
	gerar_pontos_cruzamento1(P1,P2).


cruzamento([],[]).
cruzamento([Ind*_],[Ind]).
cruzamento([Ind1*_,Ind2*_|Resto],[NInd1,NInd2|Resto1]):-
	gerar_pontos_cruzamento(P1,P2),
	prob_cruzamento(Pcruz),random(0.0,1.0,Pc),
	((Pc =< Pcruz,!,
        cruzar(Ind1,Ind2,P1,P2,NInd1),
	  cruzar(Ind2,Ind1,P1,P2,NInd2))
	;
	(NInd1=Ind1,NInd2=Ind2)),
	cruzamento(Resto,Resto1).

preencheh([],[]).

preencheh([_|R1],[h|R2]):-
	preencheh(R1,R2).


sublista(L1,I1,I2,L):-
	I1 < I2,!,
	sublista1(L1,I1,I2,L).

sublista(L1,I1,I2,L):-
	sublista1(L1,I2,I1,L).

sublista1([X|R1],1,1,[X|H]):-!,
	preencheh(R1,H).

sublista1([X|R1],1,N2,[X|R2]):-!,
	N3 is N2 - 1,
	sublista1(R1,1,N3,R2).

sublista1([_|R1],N1,N2,[h|R2]):-
	N3 is N1 - 1,
	N4 is N2 - 1,
	sublista1(R1,N3,N4,R2).

rotate_right(L,K,L1):-
	tarefas(N),
	T is N - K,
	rr(T,L,L1).

rr(0,L,L):-!.

rr(N,[X|R],R2):-
	N1 is N - 1,
	append(R,[X],R1),
	rr(N1,R1,R2).

rotate_left(L,K,L1):-
	rl(K,L,L1).

rl(0,L,L):-!.

rl(N,[X|R],R2):-
	N1 is N - 1,
	append(R,[X],R1),
	rl(N1,R1,R2).


elimina([],_,[]):-!.

elimina([X|R1],L,[X|R2]):-
	not(member(X,L)),!,
	elimina(R1,L,R2).

elimina([_|R1],L,R2):-
	elimina(R1,L,R2).

cruzar(Ind1,Ind2,P1,P2,NInd11):-
	sublista(Ind1,P1,P2,Sub1),
	tarefas(NumT),
	R is NumT-P2,
	rotate_right(Ind2,R,Ind21),
	elimina(Ind21,Sub1,Sub2),
    append(Sub2,Sub1,Sub3),
    rotate_left(Sub3,R,NInd1),
	eliminah(NInd1,NInd11).

eliminah([],[]).

eliminah([h|R1],R2):-!,
	eliminah(R1,R2).

eliminah([X|R1],[X|R2]):-
	eliminah(R1,R2).

mutacao([],[]).
mutacao([Ind|Rest],[NInd|Rest1]):-
	prob_mutacao(Pmut),
	random(0.0,1.0,Pm),
	((Pm < Pmut,!,mutacao1(Ind,NInd));NInd = Ind),
	mutacao(Rest,Rest1).

mutacao1(Ind,NInd):-
	gerar_pontos_cruzamento(P1,P2),
	mutacao22(Ind,P1,P2,NInd).

mutacao22([G1|Ind],1,P2,[G2|NInd]):-
	!, P21 is P2-1,
	mutacao23(G1,P21,Ind,G2,NInd).
mutacao22([G|Ind],P1,P2,[G|NInd]):-
	P11 is P1-1, P21 is P2-1,
	mutacao22(Ind,P11,P21,NInd).

mutacao23(G1,1,[G2|Ind],G2,[G1|Ind]):-!.
mutacao23(G1,P,[G|Ind],G2,[G|NInd]):-
	P1 is P-1,
	mutacao23(G1,P1,Ind,G2,NInd).

	mostra_solucao_otima(Pop) :-
    ordena_populacao(Pop, PopOrd),
    PopOrd = [MelhorSolucao*Pontuacao|_],
    format('A SOLUCAO OTIMA E: ~w COM PONTUACAO DE ~d.~n', [MelhorSolucao, Pontuacao]).


/*
Melhoramento 2
Permutação aleatória entre os elementos da lista de indivíduos da população:
?- random_permutation([[t2,t5,t4,t3,t1]*11,[t2,t1,t4,t5,t3]*13,[t2,t4,t3,t5,t1]*14,[t2,t5,t3,t4,t1]*14,[t2,t3,t4,t1,t5]*15,[t2,t1,t5,t4,t3]*16,[t4,t3,t1,t2,t5]*29,[t1,t4,t5,t2,t3]*34],LRP),nl,write('LRP='),write(LRP),nl.

LRP=[[t4,t3,t1,t2,t5]*29,[t2,t3,t4,t1,t5]*15,[t2,t5,t3,t4,t1]*14,[t2,t1,t4,t5,t3]*13,[t2,t4,t3,t5,t1]*14,[t2,t1,t5,t4,t3]*16,[t1,t4,t5,t2,t3]*34,[t2,t5,t4,t3,t1]*11]
LRP = [[t4, t3, t1, t2, t5]*29, [t2, t3, t4, t1, t5]*15, [t2, t5, t3, t4, t1]*14, [t2, t1, t4, t5|...]*13, [t2, t4, t3|...]*14, [t2, t1|...]*16, [t1|...]*34, [...|...]*11].
*/

/*
Melhoramento 1,2,3 e 4.
Numero de novas Geracoes: 6. 
Dimensao da Populacao: 8.
Probabilidade de Cruzamento(percentagem): 50.
Probabilidade de Mutacao(percentagem): 25.
Tempo Solucao(segundos): 15.
Avaliacao Otima: 3260.
Restricao de Estabilizacao: 3.

Pop=[[t1,t5,t3,t4,t2],[t2,t1,t3,t4,t5],[t2,t3,t1,t5,t4],[t5,t4,t1,t3,t2],[t2,t4,t3,t5,t1],[t5,t4,t3,t1,t2],[t5,t1,t2,t3,t4],[t4,t1,t5,t2,t3]]
PopAv=[[t1,t5,t3,t4,t2]*36,[t2,t1,t3,t4,t5]*14,[t2,t3,t1,t5,t4]*18,[t5,t4,t1,t3,t2]*39,[t2,t4,t3,t5,t1]*14,[t5,t4,t3,t1,t2]*40,[t5,t1,t2,t3,t4]*24,[t4,t1,t5,t2,t3]*34]
Geracao 0:
[[t2,t1,t3,t4,t5]*14,[t2,t4,t3,t5,t1]*14,[t2,t3,t1,t5,t4]*18,[t5,t1,t2,t3,t4]*24,[t4,t1,t5,t2,t3]*34,[t1,t5,t3,t4,t2]*36,[t5,t4,t1,t3,t2]*39,[t5,t4,t3,t1,t2]*40]
FinalPop=[[t2,t1,t3,t4,t5]*14,[t2,t4,t3,t5,t1]*14,[t2,t3,t1,t5,t4]*18,[t5,t1,t2,t3,t4]*24,[t4,t1,t5,t2,t3]*34,[t1,t5,t3,t4,t2]*36,[t5,t4,t1,t3,t2]*39,[t5,t4,t3,t1,t2]*40]
*/














